(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28eddd38"],{"0f38":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"menu clearfix"},[s("div",{staticClass:"home_top"},[s("div",{staticClass:"home-top"},[s("div",{staticClass:"home-top-left"},[s("div",{staticClass:"home-title"},[t._v(t._s(t.timeText)+","),t.isopenname?s("span",[t._v(t._s(t.userInfo.nickName))]):s("span",{on:{click:t.gologin}},[t._v("先登录吧")])])]),s("div",{staticClass:"home-top-right"},[s("van-icon",{staticClass:"home-top-icon",attrs:{size:"20px",color:"#0C34BA",name:"search"},on:{click:t.issearchopen}}),s("van-popup",{style:{height:"50%"},attrs:{position:"top",closeable:"","close-icon-position":"top-right"},model:{value:t.searchopen,callback:function(e){t.searchopen=e},expression:"searchopen"}},[s("div",{staticClass:"searc-div"},[s("van-search",{staticClass:"searc",attrs:{placeholder:"请输入搜索关键词"},on:{input:t.getSearch},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),s("div",{staticClass:"searc-box"},t._l(t.searchData,(function(e,a){return s("div",{key:a,staticClass:"searc-item ",class:a%2==0?"p-right":"p-left",on:{click:function(s){return t.viewProductInfo(e.pid)}}},[s("div",{staticClass:"searc-img"},[s("img",{attrs:{src:e.smallImg}})]),s("div",{staticClass:"searc-text"},[s("div",{staticClass:"searc-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"searc-enname"},[t._v(t._s(e.enname))])])])})),0)]),s("van-icon",{staticClass:"home-top-icon",attrs:{color:"#0C34BA",size:"20px",name:"scan"}}),s("van-icon",{staticClass:"home-top-icon",attrs:{color:"#0C34BA",size:"20px",name:"calender-o"}})],1)])]),s("div",{staticClass:"menu-content",class:t.inOpenLeft?"menu-content-width-open":"menu-content-width-close",style:{left:t.left+"px"},on:{touchstart:t.start,touchmove:t.move}},[s("van-cell",{staticClass:"menu-left-box",class:t.inOpenLeft?"rotateZ180":"rotateZ0",attrs:{"is-link":""},on:{click:t.shopLeft}}),s("van-popup",{staticClass:"menu-left-show",style:{height:"100%"},attrs:{position:"left",overlay:!1},model:{value:t.inOpenLeft,callback:function(e){t.inOpenLeft=e},expression:"inOpenLeft"}},[s("van-sidebar",{staticClass:"menu-left-lis",model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},t._l(t.typeData,(function(e,a){return s("van-sidebar-item",{key:a,attrs:{title:e.typeDesc},on:{click:function(s){return t.getProductsByType(e)}}})})),1)],1),s("div",{staticClass:"menu-content-box"},t._l(t.products,(function(e,a){return s("div",{key:a,staticClass:"menu-content-item",on:{click:function(s){return t.viewProductInfo(e.pid)}}},[s("div",{staticClass:"menu-content-left"},[s("img",{attrs:{src:e.smallImg,alt:""}})]),s("div",{staticClass:"menu-content-right"},[s("div",{staticClass:"menu-ct-right-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"menu-ct-right-text"},[t._v(t._s(e.type))]),s("div",[s("div",{staticClass:"menu-ct-right-prict"},[t._v("¥"+t._s(e.price))])])])])})),0)],1)])},i=[],n=(s("8b98"),{data:function(){return{userInfo:{},isopenname:!1,searchopen:!1,timeText:"",searchValue:"",inOpenLeft:!1,activeKey:0,startX:0,left:0,moveX:0,distance:0,maxLeft:80,typeData:[],products:[],searchData:[]}},created:function(){this.getTypeData(),this.getTime(),this.getTypeData(),this.getuser()},methods:{issearchopen:function(){this.searchopen=!this.searchopen},gologin:function(){this.$router.push({name:"Login"})},getTime:function(){var t=(new Date).getHours();this.timeText=t>=6&&t<12?"早上好":t>=12&&t<18?"下午好":t>=18&&t<24?"晚上好":"深夜了"},getSearch:function(){var t=this;this.$toast.loading({message:"加载中...",frobidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/search",params:{appkey:this.appkey,name:this.searchValue}}).then((function(e){t.$toast.clear(),"Q001"==e.data.code&&(t.searchData=e.data.result)}))},shopLeft:function(){this.inOpenLeft=!this.inOpenLeft},getTypeData:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/type",params:{appkey:this.appkey}}).then((function(e){t.$toast.clear(),t.typeData=e.data.result,t.getProductsByType(t.typeData[0])}))},getProductsByType:function(t){var e=this;this.products=[];var s=sessionStorage.getItem(t.type);if(s)this.products=JSON.parse(s);else{var a={key:"type",value:t.type,appkey:this.appkey};"isHot"==t.type&&(a.key="isHot",a.value=1),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/typeProducts",params:a}).then((function(s){e.$toast.clear(),500==s.data.code&&(e.products=s.data.result,sessionStorage.setItem(t.type,JSON.stringify(e.products)))})).catch((function(t){e.$toast.clear()}))}},start:function(t){this.startX=t.targetTouches[0].pageX},move:function(t){this.moveX=t.targetTouches[0].pageX,this.distance=this.startX-this.moveX;var e=this.left+this.distance;e=e>=0?0:e<=-this.maxLeft?-this.maxLeft:e,this.left=e,this.end()},end:function(){var t=Math.abs(this.left)>=this.maxLeft/2;t?(this.inOpenLeft=!0,this.left=this.maxLeft):(this.inOpenLeft=!1,this.left=0)},viewProductInfo:function(t){this.$router.push({name:"Detail",query:{pid:t}})},getuser:function(){var t=this,e=localStorage.getItem("CSTK");e&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({methods:"GET",url:"/findMy",params:{appkey:this.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),"A001"==e.data.code&&e.data.result.length>0&&(t.isopenname=!0,t.userInfo=e.data.result[0])})).catch((function(e){t.$toast.clear()})))}}}),o=n,c=s("2877"),r=Object(c["a"])(o,a,i,!1,null,"fa63b064",null);e["default"]=r.exports},"8b98":function(t,e,s){}}]);
//# sourceMappingURL=chunk-28eddd38.967e8ad1.js.map