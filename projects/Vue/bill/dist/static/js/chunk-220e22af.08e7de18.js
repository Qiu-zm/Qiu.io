(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-220e22af"],{"188e":function(t,e,a){"use strict";a.r(e);var s=(a("a9e3"),a("d3b7"),a("25f0"),a("99af"),a("fb6a"),a("365c")),i=a("3de1"),n={name:"BillProjectAddBill",data:function(){return{active:0,keyboardValue:"0.00",CommentValue:"",keyboardshow:!0,replenishbottom:284,billtypedata:[],datepopup:!1,minDate:new Date(2020,0,1),maxDate:new Date(2070,12,31),currentDate:new Date,selectbilldata:""}},mounted:function(){this.getbilltypes()},methods:{selectbill:function(t){this.selectbilldata=t},Formdate:function(t){return Object(i.b)(t,"MM月DD日")},setweek:function(t){var e=new Date(t).getDay(),a="";switch(e){case 0:a="天";break;case 1:a="一";break;case 2:a="二";break;case 3:a="三";break;case 4:a="四";break;case 5:a="五";break;case 6:a="六"}return a},newdate:function(){this.currentDate=new Date},userAddBill:function(){var t=this;if(Object(i.d)(Number(this.keyboardValue))||0==Number(this.keyboardValue))this.$toast("输入金额!");else{var e={};e.categoryId=this.selectbilldata.id,e.content=this.CommentValue,e.cost=100*Number(this.keyboardValue),e.day=new Date(this.currentDate).getDate(),e.flag=this.active,e.month=new Date(this.currentDate).getMonth()+1,e.year=new Date(this.currentDate).getFullYear(),Object(s.b)(e).then(function(e){200==e.status&&(t.$toast(e.data.message),t.CommentValue="",t.keyboardValue="",t.newdate())})}},getbilltypes:function(){var t=this;Object(s.c)().then(function(e){200==e.status&&(t.billtypedata=e.data,t.selectbilldata=e.data[0])})},goback:function(){this.$router.go(-1)},onInput:function(t){if(0==this.keyboardValue)this.keyboardValue="".concat(t);else{if("."==t&&-1!=this.keyboardValue.toString().indexOf("."))return;this.keyboardValue="".concat(this.keyboardValue).concat(t)}},onDelete:function(){var t="".concat(this.keyboardValue).slice(0,-1);""==t||isNaN(t)?this.keyboardValue="0.00":this.keyboardValue=t},InpBlur:function(){this.keyboardshow=!0,this.replenishbottom=284},InpFocus:function(){this.keyboardshow=!1,this.replenishbottom=100},selecttime:function(){this.datepopup=!this.datepopup}}},c=(a("a079"),a("2877")),o=Object(c.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bill"},[a("van-nav-bar",{attrs:{"left-arrow":""},on:{"click-left":t.goback},scopedSlots:t._u([{key:"title",fn:function(){return[a("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"支出"}}),a("van-tab",{attrs:{title:"收入"}})],1)]},proxy:!0}])}),a("div",{staticClass:"content"},[a("div",{staticClass:"head dsp_f jc_sb",style:{backgroundColor:t.selectbilldata.iconBgcolor}},[a("div",{staticClass:"head-l dsp_f"},[a("div",{staticClass:"head-l-img dsp_f jc_c"},[a("i",{staticClass:"icon iconfont",class:t.selectbilldata.iconFontClass})]),a("div",{on:{click:function(e){return t.getbilltypes()}}},[t._v(t._s(t.selectbilldata.name))])]),a("div",{staticClass:"head-r"},[t._v(t._s(t.keyboardValue))])]),a("div",{staticClass:"type-content"},[t._l(t.billtypedata,function(e,s){return a("div",{key:s,staticClass:"shell",on:{click:function(a){return t.selectbill(e)}}},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-img dsp_f jc_c"},[a("i",{staticClass:"icon iconfont",class:e.iconFontClass})]),a("div",{staticClass:"item-text"},[t._v(t._s(e.name))])])])}),t._m(0)],2),a("div",{staticClass:"replenish dsp_f",style:{bottom:t.replenishbottom+"px"}},[a("div",{staticClass:"dated",on:{click:function(e){return t.selecttime()}}},[t._v(t._s(t.Formdate(t.currentDate)))]),a("div",{staticClass:"comment"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.CommentValue,expression:"CommentValue"}],staticClass:"inp",attrs:{placeholder:"添加备注...",type:"text"},domProps:{value:t.CommentValue},on:{focus:function(e){return t.InpFocus()},blur:function(e){return t.InpBlur()},input:function(e){e.target.composing||(t.CommentValue=e.target.value)}}})])]),a("div",[a("van-number-keyboard",{attrs:{show:t.keyboardshow,theme:"custom","extra-key":["."],"close-button-text":"完成"},on:{input:t.onInput,delete:t.onDelete,close:function(e){return t.userAddBill()}}})],1)]),a("van-popup",{staticClass:"datepopup",style:{height:"40%"},attrs:{position:"bottom"},model:{value:t.datepopup,callback:function(e){t.datepopup=e},expression:"datepopup"}},[a("div",{staticClass:"top dsp_f jc_sb"},[a("div",{staticClass:"top-item"},[t._v("星期"+t._s(t.setweek(t.currentDate)))]),a("div",{staticClass:"top-item top-title"},[t._v("修改日期")]),a("div",{staticClass:"top-item top-new"},[a("span",{on:{click:function(e){return t.newdate()}}},[t._v("当前时间")])])]),a("van-datetime-picker",{staticClass:"datepicker",attrs:{"visible-item-count":"4","show-toolbar":!1,type:"date",title:"选择年月日","min-date":t.minDate,"max-date":t.maxDate,"swipe-duration":"100"},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}}),a("div",{staticClass:"btns"},[a("div",{staticClass:"btn",on:{click:function(e){return t.selecttime()}}},[t._v("确定")])])],1)],1)},[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shell"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-img dsp_f jc_c add-icon"},[a("i",{staticClass:"icon iconfont icon-jia"})]),a("div",{staticClass:"item-text"},[t._v("管理分类")])])])}],!1,null,"9661e240",null);e.default=o.exports},"3a52":function(t,e,a){},a079:function(t,e,a){"use strict";a("3a52")}}]);